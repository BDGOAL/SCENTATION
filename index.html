<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Scentation Interactive Quiz</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display&display=swap');
        
        * { box-sizing: border-box; }

        /* å…¨å±€è¨­å®š */
        body, html {
            margin: 0; padding: 0;
            background-color: #1A1A1A;
            width: 100%; height: 100%;
            -webkit-user-select: none; user-select: none;
            overflow: hidden; /* é è¨­ Kiosk æ¨¡å¼éš±è—æ²è»¸ */
        }

        /* å…§å®¹ä¸»å®¹å™¨ */
        #root { 
            width: 2160px; height: 3840px; 
            background-color: #1A1A1A;
            opacity: 0; transition: opacity 0.3s ease-in;
        }
        
        button { cursor: pointer; transition: opacity 0.1s; }
        button:active { opacity: 0.8; }
        button:focus { outline: none; }
        
        /* è¼‰å…¥èˆ‡éŒ¯èª¤æç¤º */
        #loading {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #1A1A1A; color: #B8860B;
            display: flex; justify-content: center; align-items: center;
            font-size: 40px; font-family: 'Inter', sans-serif;
            z-index: 9999;
        }
        #fatal-error {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); color: #ff5555; z-index: 100000;
            padding: 40px; font-size: 24px; white-space: pre-wrap; box-sizing: border-box; overflow: auto;
        }
    </style>
</head>
<body>
    <div id="fatal-error"></div>
    <div id="loading">System Loading...</div>
    <div id="root"></div>

    <script>
        // éŒ¯èª¤æ””æˆªå™¨
        window.onerror = function(msg, url, line, col, error) {
            document.getElementById('loading').style.display = 'none';
            const errBox = document.getElementById('fatal-error');
            errBox.style.display = 'block';
            errBox.innerHTML = "âš ï¸ Error:\n" + msg + "\nLine: " + line;
        };
    </script>

    <script type="text/babel">
        const { useState, useCallback, useEffect, useLayoutEffect, useRef } = React;
        const getBaseUrl = () => window.location.href.split('?')[0];

        // --- æ ¸å¿ƒæ’ç‰ˆå¼•æ“ ---
        const updateLayout = () => {
            const root = document.getElementById('root');
            const body = document.body;
            if (!root) return;

            const screenW = window.innerWidth;
            const screenH = window.innerHeight;
            const targetW = 2160;
            const targetH = 3840;
            const isMobile = screenW < 1000;

            if (isMobile) {
                // æ‰‹æ©Ÿæ¨¡å¼ï¼šå…è¨±æ²å‹•ï¼Œé å·¦ä¸Šå°é½Š
                body.style.overflowY = 'auto';
                body.style.overflowX = 'hidden';
                const scale = screenW / targetW;
                root.style.position = 'absolute';
                root.style.left = '0px';
                root.style.top = '0px';
                root.style.transformOrigin = 'top left';
                root.style.transform = `scale(${scale})`;
                body.style.height = `${targetH * scale}px`;
            } else {
                // Kiosk æ¨¡å¼ï¼šç¦æ­¢æ²å‹•ï¼Œçµ•å°ç½®ä¸­
                body.style.overflow = 'hidden';
                body.style.height = '100%';
                const scale = Math.min(screenW / targetW, screenH / targetH);
                root.style.position = 'absolute';
                root.style.left = '50%';
                root.style.top = '50%';
                root.style.transformOrigin = 'center center';
                root.style.transform = `translate(-50%, -50%) scale(${scale})`;
            }
            root.style.opacity = 1;
            const loader = document.getElementById('loading');
            if(loader) loader.style.display = 'none';
        };

        window.addEventListener('load', updateLayout);
        window.addEventListener('resize', updateLayout);
        setTimeout(updateLayout, 200);

        // --- è³‡æ–™è¨­å®š ---
        const iconA = 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/iconA.png';
        const iconB = 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/IconB.png';
        const logoImage = 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/Scentation_logo_2025.05.26_v1_%E7%99%BD%E5%AD%97_logo.png';
        
        const questionImages = {
            q1: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/1.png',
            q2: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/2.png',
            q3: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/3.png',
            q4: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/4.png',
            intro: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/ChatGPT%20Image%202025%E5%B9%B412%E6%9C%8815%E6%97%A5%20%E4%B8%8B%E5%8D%8803_37_10%201%20(1).png',
        };

        const productImages = {
            NT_Aventus: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_Creed_Aventus%20Collection-Aventus_edp.jpg',
            NT_SilverMountainWater: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_Creed_Silver%20Mountain%20Water_edp.jpg',
            NT_ForHimBleuNoir: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_narciso%20rodriguez_For%20Him%20Bleu%20Noir_edp.jpg',
            NF_Ani: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_Nishane_Ani_Extrait.jpg',
            NF_Nanshe: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_Nishane_Nanshe_Extrait.jpg',
            NF_Lira: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_Xerjoff_Casamorati%20-%20Lira_edp.jpg',
            NF_Zik: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_blackfades_zik.jpg',
            SJ_ForHerEDT: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_narciso%20rodriguez_For%20Her_edt.jpg',
            SJ_Buongiorno: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_Acqua%20di%20Parma_Buongiorno_edp.jpg',
            SJ_Torino23: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_Xerjoff_Torino%2023_edp.jpg',
            SP_HardLeather: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_LM%20Parfums_Hard%20Leather_Extrait%20de%20parfum.jpg',
            SP_BlackAfgano: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_Nasomatto_Black%20Afgano_Extrait%20de%20parfum.jpg',
            SP_VirginIslandWater: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_Creed_Virgin%20Island%20Water_edp.jpg',
            SP_Wandervogel: 'https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/k11%20musea%20product%20image_27%2087_Wandervogel_edp.jpg',
        };

        const zh_Questions = [
            { id: 1, title: 'é‘‘è³è—è¡“å“æ™‚ï¼Œæ‚¨çš„ç›®å…‰æœ€å…ˆè¢«ä»€éº¼å¸å¼•ï¼Ÿ', options: [{ key: 'N', text: 'ä½œå“èƒŒå¾Œçš„å“²æ€ã€è—è¡“å®¶çš„æŠ½è±¡æ¦‚å¿µï¼Œä»¥åŠå®ƒçµ¦äºˆçš„ç„¡é™è¯æƒ³ç©ºé–“ã€‚' }, { key: 'S', text: 'ä½œå“çš„æè³ªã€ç²¾æº–çš„æŠ€æ³•ã€ç”Ÿå‹•çš„è‰²å½©è¡¨ç¾ï¼Œä»¥åŠå®ƒæ‰€æç¹ªçš„çœŸå¯¦å ´æ™¯ã€‚' }], image: questionImages.q1, progressWidth: 366 },
            { id: 2, title: 'åœ¨ç·Šå¼µçš„äººéš›è¡çªä¸­ï¼Œ\næ‚¨èªç‚ºé¦™æ°£çš„ä½œç”¨æ˜¯ä»€éº¼ï¼Ÿ', options: [{ key: 'T', text: 'å¹«åŠ©æˆ‘ä¿æŒæ¸…é†’å’Œå†·éœï¼Œæ•£ç™¼å‡ºå°ˆæ¥­ã€ä¸è¢«æƒ…ç·’å½±éŸ¿çš„ç©©å®šæ°£å ´ã€‚' }, { key: 'F', text: 'æŸ”åŒ–å‘¨åœçš„æ°›åœ,å‰µé€ ä¸€å€‹æº«æš–ã€æ’«æ…°çš„ç©ºé–“ï¼Œå¹«åŠ©äººèˆ‡äººå»ºç«‹é€£çµã€‚' }], image: questionImages.q2, progressWidth: 692 },
            { id: 3, title: 'é—œæ–¼æ‚¨çš„é¦™æ°´æ”¶è—ï¼Œ\nå“ªå€‹æè¿°æœ€è²¼åˆ‡ï¼Ÿ', options: [{ key: 'J', text: 'æˆ‘æœƒæ ¹æ“šå ´åˆã€æœè£ã€ç”šè‡³æ˜¯ä¸€é€±çš„è¨ˆåŠƒï¼Œç‚ºé¦™æ°´é€²è¡Œç²¾æº–çš„åˆ†é¡å’Œé¸æ“‡ã€‚' }, { key: 'P', text: 'æˆ‘éš¨å¿ƒæ‰€æ¬²åœ°ä½¿ç”¨é¦™æ°´ï¼Œå–œæ­¡å³èˆˆç–Šé¦™ï¼Œç›¸ä¿¡æ°£å¸¶ä¾†ä¸‹çš„æ„Ÿå®˜å–œã€‚' }], image: questionImages.q3, progressWidth: 1081 },
            { id: 4, title: 'é€±æœ«æ™šä¸Šï¼Œæ‚¨æ¸´æœ›æ•£ç™¼\nå“ªä¸€ç¨®é¦™æ°£é¢¨æ ¼ï¼Ÿ', options: [{ key: 'E', text: 'æ¿ƒéƒã€å…·æœ‰é­…åŠ›ä¸”å¼µæšçš„é¦™æ°£ï¼Œå¸Œæœ›æˆç‚ºç¤¾äº¤èšæœƒä¸­æœ€ä»¤äººé›£å¿˜çš„ç„¦é»ã€‚' }, { key: 'I', text: 'å…§æ–‚ã€æœ‰å±¤æ¬¡ä¸”èˆ’é©çš„é¦™æ°£ï¼Œå®ƒæ˜¯æˆ‘ç¨è™•æ™‚çš„å„€å¼æ„Ÿï¼Œåªç‚ºæ‡‚æˆ‘çš„äººåœç•™ã€‚' }], image: questionImages.q4, progressWidth: 1400 },
        ];

        const en_Questions = [
            { id: 1, title: 'When appreciating art,\nwhat first attracts you?', options: [{ key: 'N', text: 'The philosophical ideas behind the work, the artist\'s abstract concepts, and the unlimited associative space it provides.' }, { key: 'S', text: 'The material of the work, the precise technique, the vivid color representation, and the realistic scene it depicts.' }], image: questionImages.q1, progressWidth: 366 },
            { id: 2, title: 'In tense conflict,\nwhat role does fragrance play?', options: [{ key: 'T', text: 'Helps me stay clear-headed and calm, exuding a professional, stable aura unaffected by emotions.' }, { key: 'F', text: 'Softens the atmosphere, creating a warm, comforting space to help build connections between people.' }], image: questionImages.q2, progressWidth: 692 },
            { id: 3, title: 'Which best fits\nyour fragrance collection?', options: [{ key: 'J', text: 'I categorize and select fragrances precisely based on the occasion, outfit, or even my weekly plan.' }, { key: 'P', text: 'I use fragrances spontaneously, enjoying impromptu layering, trusting the sensory surprise.' }], image: questionImages.q3, progressWidth: 1081 },
            { id: 4, title: 'On weekend evening,\nwhat scent style do you prefer?', options: [{ key: 'E', text: 'A rich, captivating, and expressive scent, hoping to be the most memorable focus of a gathering.' }, { key: 'I', text: 'A restrained, layered, and comfortable scent; my ritual when alone, lingering for those who know me.' }], image: questionImages.q4, progressWidth: 1400 },
        ];

        const zh_TW_Content = {
            intro: { title: 'æ¢ç´¢æ‚¨çš„é¦™æ°£å¯†ç¢¼', description: 'æ–¼ç¬æ¯è¬è®Šçš„éƒ½æœƒç¯€å¥ä¸­ï¼Œæ‚¨çš„é¦™æ°£å®šç¾©äº†æ‚¨çš„æ°£å ´ã€‚\nè¿…é€Ÿå‰–ææ ¸å¿ƒäººæ ¼ç‰¹è³ªï¼Œç²¾æº–æ¨è–¦æœ€èƒ½å½°é¡¯æ‚¨å€‹äººé­…åŠ›çš„é¦™èª¿ã€‚', button: 'æŒ‰æ­¤å•Ÿå‹• æ¢ç´¢é¦™æ°£' },
            nameInput: { title: 'è«‹è¼¸å…¥æ‚¨çš„å§“å', subtitle: 'è®“æˆ‘å€‘ç‚ºæ‚¨é‡èº«æ‰“é€ é¦™æ°£é«”é©—', placeholder: 'è¼¸å…¥å§“å', button: 'é–‹å§‹æ¸¬è©¦' },
            header: { tagline: 'ç‚ºæ‚¨çš„éå‡¡é¢¨æ ¼ï¼Œå°‹è¦“æ‚¨çš„å“å‘³å“²å­¸ã€‚' },
            exit: 'âœ•', restart: 'é‡æ–°æ¢ç´¢', share: 'åˆ†äº«çµæœ',
            result: { title: 'ä½ çš„é¦™æ°£å€‹æ€§', greeting: 'è¦ªæ„›çš„ [å§“å]ï¼Œ', mbtiPrefix: '(', mbtiSuffix: ')', recommendation: 'SCENTATION ç‚ºæ‚¨æ¨è–¦çš„é¦™èª¿', recommendationLabel: 'æœ€é©åˆæ‚¨å€‹æ€§çš„é¦™æ°´' },
            shareQR: { title: 'åˆ†äº«æ‚¨çš„é¦™æ°£å€‹æ€§', subtitle: 'æƒæ QR Code ç²å–å¯åˆ†äº«çš„çµæœåœ–ç‰‡', instruction: 'ä½¿ç”¨æ‰‹æ©Ÿæƒæä¸‹æ–¹ QR Codeï¼Œ\nå³å¯åœ¨ç¤¾äº¤åª’é«”ä¸Šåˆ†äº«æ‚¨çš„å°ˆå±¬é¦™æ°£çµæœ', backButton: 'è¿”å›çµæœé é¢' },
            resultsMap: {
                NT: { category: 'åˆ†æå®¶', desc: 'ä½œç‚ºé‚è¼¯è‡³ä¸Šã€è¿½æ±‚æ•ˆç‡èˆ‡è¤‡é›œæ€§çš„åˆ†æå®¶ï¼Œæ‚¨ä¸å–œæ­¡å¹³åº¸ï¼Œåæ„›èƒ½æ¿€ç™¼æ€è€ƒæˆ–å¸¶æœ‰ç¥ç§˜æ„Ÿçš„æ°£å‘³ã€‚æ‚¨çš„é¦™æ°£å¿…é ˆå±•ç¾å‡ºç¨ç‰¹çš„å“å‘³èˆ‡æ™ºæ…§ã€‚', fragrance: 'æœ¨è³ªèª¿ / è¥¿æ™®èª¿ / èŠ³é¦™èª¿', products: [
                    { brand: 'Creed', name: 'Aventus', image: productImages.NT_Aventus, notes: '', description: 'æ“…é•·çµ±ç±Œå…¨å±€èˆ‡åˆ¶å®šç­–ç•¥çš„ä½ ï¼Œæœƒè¢« Aventus é‚£ç¨®ç…™ç‡»è è˜¿é…åˆä¹¾ç‡¥æœ¨è³ªçš„çµæ§‹å¸å¼•ã€‚é€™æ”¯é¦™æ°´ä¸æµæ–¼è¡¨é¢çš„ç”œç¾ï¼Œè€Œæ˜¯ä»¥æ·±åº¦èˆ‡åŠ›é‡ï¼Œæ˜ ç…§ä½ çš„åˆ¤æ–·åŠ›èˆ‡æ¸…æ™°çš„ä¼åœ–å¿ƒã€‚' },
                    { brand: 'Creed', name: 'Silver Mountain Water', image: productImages.NT_SilverMountainWater, notes: '', description: 'ç¿’æ…£åœ¨è¤‡é›œæƒ…å¢ƒä¸­ä¿æŒè·é›¢èˆ‡å†·éœæ€è€ƒçš„äººï¼Œæœƒæ¬£è³ Silver Mountain Water å†·å†½èŒ¶é¦™èˆ‡é‡‘å±¬æ„Ÿå±±æ³‰æ°£æ¯çš„å…‹åˆ¶æ„Ÿã€‚é€™æ¬¾é¦™æ°£æ—¢ç†æ€§åˆç´”æ·¨ï¼Œå¾ˆè²¼åˆä½ ä½èª¿å»æ¥µå…·è¾¨è­˜åº¦çš„å­˜åœ¨æ–¹å¼ã€‚' },
                    { brand: 'Narciso Rodriguez', name: 'For Him Bleu Noir', image: productImages.NT_ForHimBleuNoir, notes: '', description: 'è©±ä¸å¤šã€ä½†æ¯ä¸€å¥éƒ½ç¶“éæ€è€ƒçš„æ€§æ ¼ï¼Œèˆ‡ Bleu Noir å…§æ–‚è¾›é¦™èˆ‡æœ¨è³ªéºé¦™çš„æ°£è³ªéå¸¸ç›¸è¥¯ã€‚é€™æ”¯é¦™æ°´ä¸å¼µæšï¼Œå»è®“ç•™å¿ƒè§€å¯Ÿä½ çš„äººï¼Œæ„Ÿå—åˆ°ä½ æ²‰ç©©å…‹åˆ¶èƒŒå¾Œçš„é‚è¼¯èˆ‡æ·±åº¦ã€‚' }
                ]},
                NF: { category: 'å¤–äº¤å®˜', desc: 'ä½œç‚ºæƒ…ç·’è±å¯Œçš„å¤–äº¤å®˜ï¼Œæ‚¨éœ€è¦æš–å¿ƒã€æ·±é‚ƒä¸”å…·æœ‰æ•˜äº‹æ„Ÿçš„é¦™æ°£ã€‚', fragrance: 'æ±æ–¹èª¿ / èŠ±é¦™èª¿', products: [
                    { brand: 'Nishane', name: 'Ani', image: productImages.NF_Ani, notes: '', description: 'é‡è¦–æƒ…æ„Ÿé€£çµèˆ‡é—œä¿‚æº«åº¦çš„äººï¼Œæœƒåœ¨ Ani çš„é¦™è‰ä¸­èåˆ°ä¸€å±¤å±¤è¢«è¾›é¦™èˆ‡æœ¨è³ªæ‰˜èµ·çš„æš–æ„ã€‚é€™æ”¯é¦™æ°´åƒä¸€å€‹å¾ªåºæ¼¸é€²çš„æ“æŠ±ï¼Œç‰¹åˆ¥é©åˆç”¨ä¾†ç‡Ÿé€ å®‰å…¨æ„Ÿèˆ‡ä¿¡ä»»æ°›åœï¼Œè®“äººè‡ªç„¶é¡˜æ„å‘ä½ æ‰“é–‹è©±é¡Œèˆ‡å¿ƒäº‹ã€‚' },
                    { brand: 'Nishane', name: 'Nanshe', image: productImages.NF_Nanshe, notes: '', description: 'ç¶“å¸¸æˆç‚ºèº«é‚Šäººå¿ƒéˆæ¨ç´ã€é¡˜æ„ç´°å¿ƒå‚¾è½çš„ä½ ï¼Œèˆ‡ Nanshe å¸¶ç²‰æ„Ÿçš„ç«ç‘°èˆ‡çš‚æ„Ÿæ°£æ¯ååˆ†å¥‘åˆã€‚å®ƒå°±åƒä¸€æ¢ä¹¾æ·¨è€Œæº«æš–çš„æ¯›æ¯¯ï¼Œä¸æ¶èµ°ä»»ä½•äººçš„ç„¦é»ï¼Œå»ç¸½åœ¨æ—é‚Šæä¾›å®‰ç©©èˆ‡æ”¯æŒæ„Ÿã€‚' },
                    { brand: 'Casamorati (Xerjoff)', name: 'Lira', image: productImages.NF_Lira, notes: '', description: 'æ“…é•·ä»¥æº«æŸ”èˆ‡å¹½é»˜æ‰“é–‹è·é›¢çš„äººï¼Œæœƒæ¬£è³ Lira å½·å½¿æª¸æª¬ç£…è›‹ç³•èˆ¬çš„ç¾é£Ÿé¦™èª¿ã€‚é¦™æ°£åƒæ˜¯ä¸€ä»½å‰›å‡ºçˆçš„ç”œé»é‚€è«‹ï¼Œç”œè€Œä¸è†©ï¼Œè®“ä½ çš„é«”è²¼èˆ‡å¥½ç›¸è™•è®Šå¾—å…·é«”ï¼Œå¯è¢«è¨˜ä½ä¹Ÿå®¹æ˜“è¢«è¦ªè¿‘ã€‚' },
                    { brand: 'BLACK FADES', name: 'å¤• (zik6)', image: productImages.NF_Zik, notes: '', description: 'ç¿’æ…£åœ¨ä¸€å¤©çµæŸå‰æ•´ç†æ€ç·’ã€èˆ‡è‡ªå·±å°è©±çš„æ€§æ ¼ï¼Œå¾ˆé©åˆç”¨ä¸Šã€Œå¤• (zik6)ã€é€™æ¬¾ä»¥é»ƒæ˜ç‚ºæ„è±¡çš„é¦™æ°£ã€‚è‹¦æª¸æª¬ã€é’æª¸èˆ‡çµ²æŸå¸¶å‡ºç•¥å¸¶å†·èª¿çš„æ¸…æ–°é–‹ç«¯ï¼Œå½·å½¿æ—¥å…‰å°‡é€€æœªé€€ï¼ŒåŸå¸‚è²éŸ³é€æ¼¸å®‰éœä¸‹ä¾†ï¼›éš¨å¾Œæ¾æœ¨ã€è‹”è˜šã€å²©è˜­è‰ã€æªœæœ¨ã€æª€é¦™èˆ‡é›ªæ¾å †ç–Šå‡ºå……æ»¿æœ¨è³ªèˆ‡ç¥ç€æ„Ÿçš„ç©ºé–“ï¼Œå¥½åƒèµ°é€²åªäº®è‘—æš–ç‡ˆçš„å°æˆ¿é–“ï¼Œç•™ä¸‹å°ˆå±¬æ–¼è‡ªå·±ã€ä¸è¢«æ‰“æ“¾çš„ me-timeã€‚' }
                ]},
                SJ: { category: 'å®ˆè­·è€…', desc: 'ä½œç‚ºå®ˆè­·è€…ï¼Œæ‚¨åæ„›æ¸…æ™°ç©©å®šä¸”å°ˆæ¥­çš„é¦™æ°£ã€‚', fragrance: 'æŸ‘æ©˜èª¿ / æ¸…æ–°éºé¦™', products: [
                    { brand: 'Narciso Rodriguez', name: 'For Her EDT', image: productImages.SJ_ForHerEDT, notes: '', description: 'é‡è¦–ç©©å®šã€ä¹¾æ·¨èˆ‡å¯ä¿¡åº¦çš„æ€§æ ¼ï¼Œèˆ‡ For Her EDT è²¼è†šéºé¦™çš„æ°£è³ªé«˜åº¦å‘¼æ‡‰ã€‚é¦™æ°£åƒå¤©ç”Ÿè‡ªå¸¶çš„é«”é¦™ä¸€æ¨£ä½èª¿å»é›£ä»¥å¿½è¦–ï¼Œéå¸¸é©åˆé€šå‹¤ã€ä¸Šç­æˆ–å®¶åº­èšæœƒï¼Œè®“æ—äººè‡ªç„¶æŠŠä½ å’Œç´°å¿ƒã€é«”è²¼èˆ‡å¯é è¯æƒ³åœ¨ä¸€èµ·ã€‚' },
                    { brand: 'Acqua di Parma', name: 'Buongiorno', image: productImages.SJ_Buongiorno, notes: '', description: 'å–œæ­¡æŠŠæ¯ä¸€å¤©å®‰æ’å¾—äº•ç„¶æœ‰åºã€å¾æ—©ä¸Šé–‹å§‹å°±ç¶­æŒæ¸…é†’ç‹€æ…‹çš„äººï¼Œæœƒå° Buongiorno çš„è‰æœ¬æŸ‘æ©˜é¦™ç‰¹åˆ¥æœ‰å…±é³´ã€‚å®ƒåƒç‚ºè‡ªå·±æŒ‰ä¸‹ã€Œæ­£å¼é–‹å§‹ã€çš„ä¸€éµå•Ÿå‹•ï¼Œä¸æµ®èª‡å»æŒçºŒå¸¶ä¾†æ¸…æ–°æœ‰åºçš„æ„Ÿè¦ºï¼Œå°¤å…¶é©åˆéœ€è¦å°ˆæ³¨è™•ç†ç´°ç¯€çš„å·¥ä½œæ—¥æ—©æ™¨ã€‚' },
                    { brand: 'Xerjoff', name: 'Torino 23', image: productImages.SJ_Torino23, notes: '', description: 'åŒæ™‚é‡è¦–ç¦®è²Œã€å„€æ…‹èˆ‡ç”Ÿæ´»ç¯€å¥çš„äººï¼Œæœƒåœ¨ Torino 23 èº«ä¸Šæ‰¾åˆ°ç†æƒ³çš„å¹³è¡¡ã€‚ç™½èŠ±èˆ‡æœ¨è³ªåº•è˜Šå‹¾å‹’å‡ºå®›å¦‚é‹å‹•å¾Œæ·‹æµ´ã€æ›ä¸Šä¹¾æ·¨è¡£ç‰©çš„æ¸…çˆ½ç‹€æ…‹ï¼Œè®“ä½ ç„¡è«–è™•æ–¼æ­£å¼æˆ–ä¼‘é–’å ´åˆï¼Œéƒ½èƒ½ä¿æŒåŒæ¨£å¾—é«”è€Œä¸å‘†æ¿çš„å½¢è±¡ã€‚' }
                ]},
                SP: { category: 'æ¢éšªå®¶', desc: 'ä½œç‚ºæ¢éšªå®¶ï¼Œæ‚¨éœ€è¦å……æ»¿æ´»åŠ›ä¸”æ¥µå…·å€‹äººè‰²å½©çš„é¦™æ°£ã€‚', fragrance: 'çš®é©èª¿ / è¾›è¾£èª¿', products: [
                    { brand: 'LM Parfums', name: 'Hard Leather', image: productImages.SP_HardLeather, notes: '', description: 'æ¨‚æ–¼å˜—è©¦æ¥µå¼·çƒˆé«”é©—ã€ä¸ä»‹æ„è¢«å½¢å®¹ç‚ºã€Œç©å¾—å¾ˆç›¡ã€çš„äººï¼Œéå¸¸é©åˆ Hard Leather é€™ç¨®å¸¶å‹•ç‰©æ„Ÿçš„çš®é©èˆ‡æ²ˆé¦™çµ„åˆã€‚æ°£å‘³å­˜åœ¨æ„Ÿæ¥µå¼·ï¼Œä¸åˆ»æ„å–æ‚…æ‰€æœ‰äººï¼Œå»æ¸…æ¥šä¿ç•™ä½ æ•¢è¡æ•¢è©¦çš„æ…‹åº¦ï¼Œå°¤å…¶é©åˆå¤œæ™šã€æ´¾å°æˆ–éœ€è¦ç•™ä¸‹æ·±åˆ»å°è±¡çš„å ´åˆã€‚' },
                    { brand: 'Nasomatto', name: 'Black Afgano', image: productImages.SP_BlackAfgano, notes: '', description: 'å°æš—é»‘ç¾å­¸èˆ‡å¯¦é©—æ€§ä½œå“æŠ±æœ‰å¼·çƒˆå¥½å¥‡å¿ƒçš„æ€§æ ¼ï¼Œå¾ˆå®¹æ˜“èˆ‡ Black Afgano çš„åšé‡æ¨¹è„‚ã€ç…™ç‡»èˆ‡æ²ˆé¦™ç”¢ç”Ÿå…±é³´ã€‚é€™æ”¯é¦™æ°´åƒä¸€æ®µä¸æŒ‰å¸¸ç†å‡ºç‰Œçš„æ—…ç¨‹ï¼Œé©åˆç”¨ä¾†æ‰“ç ´ä»–äººå°ä½ çš„æ—¢å®šå°è±¡ï¼Œæˆ–è€…ç‚ºè‡ªå·±ä¿ç•™ä¸€ä»½é›£ä»¥è¢«çœ‹ç©¿çš„ç¥ç§˜æ„Ÿã€‚' },
                    { brand: 'Creed', name: 'Virgin Island Water', image: productImages.SP_VirginIslandWater, notes: '', description: 'ä¸€è½åˆ°æ—…è¡Œã€æµ·å³¶æˆ–å³èˆˆå‡ºèµ°å°±æœƒç«‹åˆ»æŠ•å…¥ç‹€æ…‹çš„äººï¼Œæœƒå¾ˆé©åˆç”¨ Virgin Island Water ä½œç‚ºæ¨™èªŒæ€§é¦™æ°£ã€‚é’æª¸ã€æ¤°å­èˆ‡ç™½è˜­å§†ç‡Ÿé€ å‡ºå¦‚åŒè¡Œèµ°å‡æœŸèˆ¬çš„æ°›åœï¼Œç‰¹åˆ¥é©åˆå¤å¤©ã€æ²™ç˜ã€éŸ³æ¨‚ç¯€æˆ–ä»»ä½•ä½ æ‰“ç®—è¼•é¬†ç©æ¨‚çš„å ´åˆã€‚' },
                    { brand: '27 87', name: 'Wandervogel', image: productImages.SP_Wandervogel, notes: '', description: 'å–œæ­¡èªªèµ°å°±èµ°ã€åŒæ™‚å°æ–°ç§‘æŠ€èˆ‡æ–°é«”é©—ä¿æŒé«˜åº¦èˆˆè¶£çš„äººï¼Œæœƒè¢« Wandervogel å¸¶ç´«è˜‡èˆ‡æµ·é¢¨æ„Ÿçš„å‰è¡›æ¸…æ–°èª¿å¸å¼•ã€‚é€™æ¬¾é¦™æ°£ä¸èµ°å‚³çµ±ä¹–å·§è·¯ç·šï¼Œè€Œæ˜¯å¸¶è‘—ä¸€é»æœªä¾†æ„Ÿèˆ‡å¯¦é©—æ°£è³ªï¼Œæ­£å¥½ç”¨ä¾†è¡¨é”ä½ ä¸é¡˜è¢«æ¡†é™çš„ä¸€é¢ã€‚' }
                ]}
            },
            questions: zh_Questions
        };

        const en_Content = {
            intro: { title: 'Unlock Your Scent Code', description: 'In the fast-paced urban rhythm, your scent defines your aura.\nQuickly analyze your core personality traits and receive precise recommendations for a luxury scent that highlights your unique charm.', button: 'Discover Your Unique Charm' },
            nameInput: { title: 'Enter Your Name', subtitle: 'Let us tailor a scent experience just for you', placeholder: 'Your name', button: 'Start Now' },
            header: { tagline: 'The Philosophy of Taste:\nFinding your signature scent for your extraordinary style.' },
            exit: 'âœ•', restart: 'Restart Quiz', share: 'Share With Friends',
            result: { title: 'Your Exclusive Fragrance:', greeting: 'Dear [NAME],', mbtiPrefix: ' ', mbtiSuffix: '', recommendation: 'Your SCENTATION Recommended Scent:', recommendationLabel: 'Recommended fragrances:' },
            shareQR: { title: 'Share Your Scent Persona', subtitle: 'Scan the QR Code to get a sharable result image', instruction: 'Scan the QR Code with your phone\nto save and share your result on social media.', backButton: 'Back to Result Page' },
            resultsMap: {
                NT: { category: 'I. The Analysts', desc: 'As a logic-driven analyst pursuing efficiency and complexity,\nyou dislike mediocrity. You favor scents that provoke thought\nor carry a sense of mystery. Your fragrance must demonstrate\nunique taste and intelligence.', fragrance: 'Woody / Chypre / Aromatic', products: [
                    { brand: 'Creed', name: 'Aventus', image: productImages.NT_Aventus, notes: '', description: 'If you enjoy organizing complex situations into clear, actionable plans, Aventus\' smoky pineapple combined with a dry woody structure amplifies your "well-planned and ambitious" side. What others smell is not just a pleasant fruity fragrance, but a person who knows how to control the rhythm and lead the situation.' },
                    { brand: 'Creed', name: 'Silver Mountain Water', image: productImages.NT_SilverMountainWater, notes: '', description: 'If you prefer to maintain appropriate distance and perspective in interactions, this metallic cold tea scent makes you appear calmer, cleaner, and smarterâ€”as if always standing at a slightly elevated position overlooking the chess board rather than being pushed by emotions.' },
                    { brand: 'Narciso Rodriguez', name: 'For Him Bleu Noir', image: productImages.NT_ForHimBleuNoir, notes: '', description: 'If you\'re not naturally talkative, Bleu Noir\'s dark woody musk makes your silence "deep" rather than "lacking presence." People will find you difficult to read but simultaneously stable and restrainedâ€”like someone who doesn\'t act rashly but is worth listening to carefully when they do speak.' }
                ] },
                SJ: { category: 'III. The Sentinels', desc: 'As a pragmatic, reliable, and rule-following Sentinel, you favor clear, dependable, and not overly ostentatious "safe" scents. Your fragrance must pass perfectly, bringing a sense of security and professionalism.', fragrance: 'Fougere / Clean Musk / Citrus', products: [
                    { brand: 'Narciso Rodriguez', name: 'For Her EDT', image: productImages.SJ_ForHerEDT, notes: '', description: 'If you want to appear steady, clean, and reliable, For Her EDT\'s skin-like musk is understated but impossible to ignore. Perfect for daily commutes or family gatherings, it subconsciously links you to keywords like "meticulous, considerate, and trustworthy."' },
                    { brand: 'Acqua di Parma', name: 'Buongiorno', image: productImages.SJ_Buongiorno, notes: '', description: 'If you like an organized start to your day, Buongiorno\'s herbal citrus scent is like a "start switch." It adds a layer of fresh orderliness to your presence without being loudâ€”ideal for focused work mornings.' },
                    { brand: 'Xerjoff', name: 'Torino 23', image: productImages.SJ_Torino23, notes: '', description: 'If you value manners and rhythm, Torino 23 smells like that fresh-showered moment after sports. Its white floral and woody base creates a "serious but not rigid" vibe, keeping you poised across formal and casual settings.' }
                ] },
                NF: { category: 'II. The Diplomats', desc: 'As an emotionally rich diplomat who values interpersonal connection,\nyou need warm, profound, and narrative scents.\nYour fragrance will seek emotional support\nor exude approachable charm in social settings.', fragrance: 'Oriental / Floral / Gourmand', products: [
                    { brand: 'Nishane', name: 'Ani', image: productImages.NF_Ani, notes: '', description: 'If emotional warmth matters to you, Ani\'s vanilla isn\'t just sweetâ€”it\'s layered with spice and woods like a tightening hug. Use it to build safety and trust, encouraging others to open up to you.' },
                    { brand: 'Nishane', name: 'Nanshe', image: productImages.NF_Nanshe, notes: '', description: 'If you often become the person in your friends\' eyes who "understands and listens to the heart," Nanshe\'s powdery rose and soapy scent adds a layer of soft and stable aura to you.' },
                    { brand: 'Casamorati (Xerjoff)', name: 'Lira', image: productImages.NF_Lira, notes: '', description: 'If you want your first impression to be "easy to get along with, with a touch of sweetness," Lira\'s gourmand scent, like a lemon pound cake, makes you feel like inviting others to sit down and share a freshly baked dessert.' },
                    { brand: 'BLACK FADES', name: 'Zik (å¤•)', image: productImages.NF_Zik, notes: '', description: '"Zik" (å¤•) refers to the time after dusk when the world gradually quiets down, leaving only yourself in dialogue with your inner self. The opening bitter lemon, lime, and cypress bring a cool freshness. Then, pine, moss, vetiver, hinoki, sandalwood, and cedar create a woody and amber-infused space, like walking into a warmly lit small room after dusk.' }
                ] },
                SP: { category: 'IV. The Explorers', desc: 'As an Explorer who lives in the moment and loves freedom and excitement,\nyou need vibrant, dynamic, or strongly individualistic scents.\nYour fragrance should reflect a fast-paced life\nand an extroverted personality.', fragrance: 'Leather / Spicy / Aquatic', products: [
                    { brand: 'LM Parfums', name: 'Hard Leather', image: productImages.SP_HardLeather, notes: '', description: 'If you play big, Hard Leather\'s animalic oud makes you impossible to ignore. It doesn\'t aim to please everyone but keeps your bold attitude front and centerâ€”perfect for parties or making a strong impression.' },
                    { brand: 'Nasomatto', name: 'Black Afgano', image: productImages.SP_BlackAfgano, notes: '', description: 'If you love "dark" or "experimental" vibes, Black Afgano\'s heavy resin and smoke creates a dangerous allure. It smells like an unconventional journey, ideal for challenging norms or maintaining mystery.' },
                    { brand: 'Creed', name: 'Virgin Island Water', image: productImages.SP_VirginIslandWater, notes: '', description: 'If travel energizes you, this is a PiÃ±a Colada in a bottle. Lime, coconut, and rum create a "walking vacation" vibe, perfect for summer, festivals, or whenever you want to have fun.' },
                    { brand: '27 87', name: 'Wandervogel', image: productImages.SP_Wandervogel, notes: '', description: 'If you love spontaneity and new tech, Wandervogel\'s avant-garde shiso and sea breeze scent makes you look like you\'re seeking the next destination. It\'s futuristic and experimental, just like you.' }
                ] },
            },
            questions: en_Questions
        };

        const translations = { 'zh-TW': zh_TW_Content, 'en': en_Content };

        const QRCodeComp = ({ value, size }) => {
            const qrRef = useRef(null);
            useEffect(() => {
                const timer = setTimeout(() => {
                    if (qrRef.current && window.QRCode && value) {
                        try {
                            qrRef.current.innerHTML = "";
                            new QRCode(qrRef.current, { text: value, width: size, height: size, colorDark: "#000000", colorLight: "#ffffff", correctLevel: QRCode.CorrectLevel.H });
                        } catch (e) {
                            console.error(e);
                        }
                    }
                }, 100);
                return () => clearTimeout(timer);
            }, [value, size]);
            return <div ref={qrRef} style={{ padding: '40px', background: '#fff', borderRadius: '30px' }} />;
        };

        const App = () => {
            const [currentPage, setCurrentPage] = useState('intro');
            const [currentLang, setCurrentLang] = useState('zh-TW');
            const [score, setScore] = useState({ N: 0, S: 0, J: 0, P: 0, T: 0, F: 0, E: 0, I: 0 });
            const [playerName, setPlayerName] = useState('');
            const [result, setResult] = useState(null);
            const [shareUrl, setShareUrl] = useState('');
            const [isShareMode, setIsShareMode] = useState(false);

            useEffect(() => { setTimeout(updateLayout, 300); }, []);

            const texts = translations[currentLang];
            const keyboardLetters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');

            useEffect(() => {
                try {
                    const params = new URLSearchParams(window.location.search);
                    const mode = params.get('mode');
                    
                    if (mode === 'share') {
                        setIsShareMode(true);
                        const name = params.get('name') || '';
                        const type = params.get('type') || 'NT';
                        const p1 = parseInt(params.get('p1') || '0');
                        const p2 = parseInt(params.get('p2') || '1');
                        const lang = params.get('lang') || 'zh-TW';

                        if (lang === 'en' || lang === 'zh-TW') setCurrentLang(lang);
                        
                        let categoryKey = 'NT';
                        if(type.includes('N') && type.includes('T')) categoryKey='NT';
                        else if(type.includes('N') && type.includes('F')) categoryKey='NF';
                        else if(type.includes('S') && type.includes('J')) categoryKey='SJ';
                        else if(type.includes('S') && type.includes('P')) categoryKey='SP';

                        const targetContent = (lang === 'en') ? en_Content : zh_TW_Content;
                        const originalResultData = targetContent.resultsMap[categoryKey];
                        
                        if (originalResultData) {
                            const prod1 = originalResultData.products[p1] || originalResultData.products[0];
                            const prod2 = originalResultData.products[p2] || originalResultData.products[1];
                            setPlayerName(name);
                            setResult({ mbtiType: type, resultData: { ...originalResultData, products: [prod1, prod2] } });
                            setCurrentPage('result');
                        }
                    } else {
                        let timer;
                        const reset = () => { clearTimeout(timer); timer = setTimeout(() => restartQuiz(), 120000); };
                        ['mousedown', 'mousemove', 'keypress', 'touchstart', 'click'].forEach(e => window.addEventListener(e, reset));
                        reset();
                        return () => { clearTimeout(timer); };
                    }
                } catch(e) {
                    console.error("Init Error", e);
                }
            }, []);

            const restartQuiz = useCallback(() => {
                setCurrentPage('intro');
                setScore({ N: 0, S: 0, J: 0, P: 0, T: 0, F: 0, E: 0, I: 0 });
                setResult(null);
                setPlayerName('');
                setShareUrl('');
            }, []);

            const calculateResult = useCallback((finalScore) => {
                const N_S = finalScore.N > finalScore.S ? 'N' : 'S';
                const J_P = finalScore.J > finalScore.P ? 'J' : 'P';
                const T_F = finalScore.T > finalScore.F ? 'T' : 'F';
                const E_I = finalScore.E > finalScore.I ? 'E' : 'I';
                const mbtiType = E_I + N_S + T_F + J_P;

                let finalKey;
                if (N_S === 'N') { finalKey = T_F === 'T' ? 'NT' : 'NF'; }
                else { finalKey = T_F === 'F' ? 'SJ' : 'SP'; }

                const originalResultData = texts.resultsMap[finalKey];
                
                let selectedProducts;
                if (finalKey === 'NF') {
                    const zikProduct = originalResultData.products.find(p => p.brand === 'BLACK FADES');
                    const otherProducts = originalResultData.products.filter(p => p.brand !== 'BLACK FADES');
                    const randomOther = otherProducts.sort(() => Math.random() - 0.5)[0];
                    selectedProducts = zikProduct ? [zikProduct, randomOther] : otherProducts.slice(0, 2);
                } else {
                    selectedProducts = [...originalResultData.products].sort(() => Math.random() - 0.5).slice(0, 2);
                }
                
                const p1Index = originalResultData.products.findIndex(p => p.name === selectedProducts[0].name);
                const p2Index = originalResultData.products.findIndex(p => p.name === selectedProducts[1].name);

                const resultData = { ...originalResultData, products: selectedProducts };
                setResult({ mbtiType, resultData });

                const baseUrl = getBaseUrl();
                const params = new URLSearchParams({
                    mode: 'share',
                    name: playerName || '',
                    type: mbtiType,
                    p1: p1Index,
                    p2: p2Index,
                    lang: currentLang
                });
                setShareUrl(`${baseUrl}?${params.toString()}`);
                setCurrentPage('result');
            }, [playerName, texts.resultsMap, currentLang]);

            const handleAnswer = useCallback((scoreKey, isLastQuestion = false) => {
                setScore(prevScore => {
                    const newScore = { ...prevScore, [scoreKey]: prevScore[scoreKey] + 1 };
                    if (isLastQuestion) calculateResult(newScore);
                    else setCurrentPage(prevPage => (typeof prevPage === 'number' ? prevPage + 1 : prevPage));
                    return newScore;
                });
            }, [calculateResult]);

            const startQuiz = useCallback(() => { setCurrentPage('nameInput'); }, []);
            const beginQuestions = useCallback(() => {
                setPlayerName(prev => (prev && prev.trim() ? prev.trim() : ''));
                setCurrentPage(1);
            }, []);
            const exitToIntro = useCallback(() => { restartQuiz(); }, [restartQuiz]);
            const goToSharePage = useCallback(() => { if (shareUrl) setCurrentPage('share'); }, [shareUrl]);
            const backToResultPage = useCallback(() => { setCurrentPage('result'); }, []);

            return (
                <div style={{ position: 'relative', width: '2160px', height: '3840px', boxSizing: 'border-box' }}>
                    <div style={{ position: 'absolute', width: '100%', height: '100%', left: 0, top: 0 }}>
                        <img src="https://raw.githubusercontent.com/BDGOAL/SCENTATION/refs/heads/main/pattern.png" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />
                    </div>

                    <div style={{
                        position: 'absolute', width: '1722px', height: '3392px',
                        left: currentPage === 'intro' ? '220px' : '219px',
                        top: currentPage === 'intro' ? '222px' : '216px',
                        background: 'linear-gradient(165.55deg, #1A1A1A 0%, #2B2B2B 100%)',
                        boxShadow: '0px 0px 39.9px 1px #D4AF37', borderRadius: '35px'
                    }}>
                        <div style={{
                            position: 'absolute', top: '0px', zIndex: 100,
                            width: (currentPage === 'result' || currentPage === 'share') ? '864px' : '75%',
                            left: (currentPage === 'result' || currentPage === 'share') ? 'calc(50% - 864px/2 + 1px)' : '12.5%'
                        }}>
                            <img src={logoImage} style={{ width: '100%', height: 'auto', objectFit: 'contain', display: 'block' }} />
                        </div>

                        {currentPage !== 'result' && currentPage !== 'share' && !isShareMode && (
                            <div style={{ position: 'absolute', width: '553.5px', height: '108px', right: '60px', bottom: '80px', zIndex: 50 }}>
                                <div style={{ position:'absolute', width:'266px', height:'108px', left:0, top:0 }}>
                                    <div style={{ position:'absolute', width:'100%', height:'100%', borderRadius:'25px', background: currentLang==='zh-TW'?'#B8860B':'#383838' }}></div>
                                    <button onClick={()=>setCurrentLang('zh-TW')} style={{ position:'absolute', width:'100%', height:'100%', background:'transparent', border:'none', color:'#FFF', fontSize:'50px', fontFamily:"'Inter',sans-serif" }}>ç¹é«”</button>
                                </div>
                                <div style={{ position:'absolute', width:'266px', height:'108px', left:'286px', top:0 }}>
                                    <div style={{ position:'absolute', width:'100%', height:'100%', borderRadius:'25px', background: currentLang==='en'?'#B8860B':'#383838' }}></div>
                                    <button onClick={()=>setCurrentLang('en')} style={{ position:'absolute', width:'100%', height:'100%', background:'transparent', border:'none', color:'#FFF', fontSize:'50px', fontFamily:"'Inter',sans-serif" }}>English</button>
                                </div>
                            </div>
                        )}

                        {!isShareMode && (
                            <div style={{ position: 'absolute', left: '74px', top: '71px', zIndex: 52, display: currentPage==='intro'?'none':'block' }}>
                                <div style={{ position: 'absolute', width: '132px', height: '132px', border: '5px solid #B8860B', borderRadius: '50%', boxSizing: 'border-box' }}></div>
                                <button onClick={exitToIntro} style={{ position: 'absolute', width: '132px', height: '132px', background: 'transparent', border: 'none', color: '#B8860B', fontSize: '60px', fontFamily: "'Inter', sans-serif" }}>{texts.exit}</button>
                            </div>
                        )}

                        {currentPage === 'intro' && (
                            <>
                                <div style={{ position: 'absolute', width: '1330px', height: '38px', left: 'calc(50% - 1330px/2)', top: currentLang === 'en' ? '500px' : '470px' }}>
                                    <div style={{ position: 'absolute', width: '100%', height: '0px', top: '0px', border: '6px solid #B8860B' }}></div>
                                    <div style={{ position: 'absolute', width: '100%', height: '0px', top: '38px', border: '12px solid #B8860B' }}></div>
                                </div>
                                <div style={{ position: 'absolute', width: '1280px', left: 'calc(50% - 1280px/2)', top: currentLang === 'en' ? '620px' : '571px', fontFamily: "'Inter', sans-serif", fontSize: currentLang === 'en' ? '38px' : '64px', textAlign: 'center', color: '#B8860B', lineHeight: currentLang === 'en' ? '58px' : '77px' }}>{texts.header.tagline}</div>
                                <div style={{ position: 'absolute', width: '1482px', left: 'calc(50% - 1482px/2)', top: currentLang === 'en' ? '733px' : '673px', fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '120px' : '150px', lineHeight: currentLang === 'en' ? '140px' : '182px', textAlign: 'center', color: '#B8860B' }}>{texts.intro.title}</div>
                                <div style={{ position: 'absolute', width: '1400px', left: 'calc(50% - 1400px/2)', top: currentLang === 'en' ? '940px' : '890px', fontFamily: "'Inter', sans-serif", fontSize: currentLang === 'en' ? '38px' : '44px', lineHeight: currentLang === 'en' ? '58px' : '1.2', textAlign: 'center', color: '#FFFFFF', whiteSpace: 'pre-wrap' }}>{texts.intro.description.replace(/\n/g, ' ')}</div>
                                <div style={{ position: 'absolute', width: '1331px', height: '38px', left: 'calc(50% - 1331px/2 + 0.5px)', top: currentLang === 'en' ? '1160px' : '1040px' }}>
                                    <div style={{ position: 'absolute', width: '100%', height: '0px', top: '0px', border: '12px solid #B8860B' }}></div>
                                    <div style={{ position: 'absolute', width: '100%', height: '0px', top: '38px', border: '6px solid #B8860B' }}></div>
                                </div>
                                <div style={{ position: 'absolute', width: '1148px', height: '1200px', left: 'calc(50% - 1148px/2)', top: currentLang === 'en' ? '1300px' : '1139px', borderRadius: '25px', overflow: 'hidden' }}>
                                    <img src={questionImages.intro} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />
                                </div>
                                <button onClick={startQuiz} style={{ position: 'absolute', width: '1050px', height: '210px', left: 'calc(50% - 1050px/2)', top: currentLang === 'en' ? '2220px' : '2092px', background: '#B8860B', boxShadow: '0px 0px 18px 9px #FFFFFF', borderRadius: '25px', border: 'none', fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '64px' : '96px', color: '#FFFFFF' }}>{texts.intro.button}</button>
                                <div style={{ position: 'absolute', width: '1148px', height: '110px', left: '287px', top: currentLang === 'en' ? '2469px' : '2339px', background: '#FFFFFF', borderRadius: '0px 0px 25px 25px' }}></div>
                                <div style={{ position: 'absolute', width: '1000px', left: 'calc(50% - 1000px/2)', top: currentLang === 'en' ? '2492px' : '2362px', fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '42px' : '55px', textAlign: 'center', color: '#B8860B' }}>{currentLang === 'zh-TW' ? '*é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å§‹æ‚¨çš„é¦™å‘³æ¸¬è©¦' : '*Tap the button above to start your scent quiz'}</div>
                            </>
                        )}

                        {currentPage === 'nameInput' && (
                            <div style={{ position: 'absolute', width: '100%', height: '100%', zIndex: 60 }}>
                                <div style={{ position: 'absolute', width: '1482px', left: 'calc(50% - 1482px/2)', top: '650px', fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '110px' : '130px', textAlign: 'center', color: '#B8860B' }}>{texts.nameInput.title}</div>
                                <div style={{ position: 'absolute', width: '1280px', left: 'calc(50% - 1280px/2)', top: '880px', fontFamily: "'Inter', sans-serif", fontSize: currentLang === 'en' ? '48px' : '56px', textAlign: 'center', color: '#FFFFFF' }}>{texts.nameInput.subtitle}</div>
                                <div style={{ position: 'absolute', width: '900px', height: '140px', left: 'calc(50% - 900px/2)', top: '1100px', background: '#FFFFFF', borderRadius: '25px', display: 'flex', alignItems: 'center', padding: '0 40px', boxSizing: 'border-box' }}>
                                    <div style={{ fontFamily: "'Inter', sans-serif", fontSize: '56px', color: playerName ? '#1A1A1A' : '#999999' }}>{playerName || texts.nameInput.placeholder}</div>
                                    <span className="cursor">|</span>
                                </div>
                                <div style={{ position: 'absolute', width: '1400px', left: 'calc(50% - 1400px/2)', top: '1350px', display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '30px' }}>
                                    <div style={{ display: 'flex', flexWrap: 'wrap', gap: '20px', justifyContent: 'center' }}>
                                        {keyboardLetters.map(l => (
                                            <button key={l} onClick={() => setPlayerName(p => (p+l).slice(0,12))} style={{ width: '150px', height: '150px', borderRadius: '30px', border: '3px solid #B8860B', background: '#2B2B2B', fontFamily: "'Inter', sans-serif", fontWeight: 600, fontSize: '72px', color: '#FFFFFF' }}>{l}</button>
                                        ))}
                                    </div>
                                    <div style={{ display: 'flex', gap: '40px', marginTop: '10px' }}>
                                        <button onClick={() => setPlayerName(p => (p+' ').slice(0,16))} style={{ width: '390px', height: '150px', borderRadius: '30px', border: '3px solid #B8860B', background: '#2B2B2B', fontFamily: "'Inter', sans-serif", fontWeight: 500, fontSize: currentLang === 'en' ? '60px' : '66px', color: '#FFFFFF' }}>{currentLang==='zh-TW'?'ç©ºç™½':'Space'}</button>
                                        <button onClick={() => setPlayerName(p => p.slice(0,-1))} style={{ width: '390px', height: '150px', borderRadius: '30px', border: '3px solid #B8860B', background: '#2B2B2B', fontFamily: "'Inter', sans-serif", fontWeight: 500, fontSize: currentLang === 'en' ? '60px' : '66px', color: '#FFFFFF' }}>{currentLang==='zh-TW'?'åˆªé™¤':'Delete'}</button>
                                        <button onClick={beginQuestions} style={{ width: '390px', height: '150px', borderRadius: '30px', border: 'none', background: '#B8860B', fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '60px' : '66px', color: '#FFFFFF', boxShadow: '0 0 18px 6px rgba(255,255,255,0.3)' }}>{texts.nameInput.button}</button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {texts.questions.map(q => currentPage === q.id && (
                            <div key={q.id}>
                                <div style={{ position: 'absolute', width: '1280px', left: '220px', top: '676px', fontFamily: "'Inter', sans-serif", fontSize: currentLang === 'en' ? '48px' : '64px', textAlign: 'center', color: '#FFFFFF' }}>{texts.header.tagline}</div>
                                <div style={{ position: 'absolute', width: '1400px', height: '48px', left: '160px', top: currentLang === 'en' ? '828px' : '804px', background: '#333', borderRadius: '43px' }}>
                                    <div style={{ width: `${q.progressWidth}px`, height: '100%', background: '#B8860B', borderRadius: '43px', transition: 'width 0.5s' }}></div>
                                </div>
                                <div style={{ position: 'absolute', width: currentLang === 'en' && (q.id === 2 || q.id === 4) ? '1400px' : '1182px', left: currentLang === 'en' && (q.id === 2 || q.id === 4) ? 'calc(50% - 1400px/2)' : 'calc(50% - 1182px/2)', top: currentLang === 'en' ? '1018px' : '994px', fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '80px' : '96px', textAlign: 'center', color: '#B8860B', whiteSpace: 'pre-line' }}>{q.title}</div>
                                <div style={{ position: 'absolute', width: '1309px', height: '602px', left: 'calc(50% - 1309px/2)', top: currentLang === 'en' ? '1348px' : '1298px', borderRadius: '25px', overflow: 'hidden' }}>
                                    <img src={q.image} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />
                                </div>
                                <div style={{ position: 'absolute', width: '1449px', left: 'calc(50% - 1449px/2)', top: currentLang === 'en' ? '2047px' : '1997px' }}>
                                    <img src={iconA} style={{ position: 'absolute', left: '0px', top: '10px', width: '120px', transform: 'scale(1.2)' }} />
                                    <button onClick={() => handleAnswer(q.options[0].key, q.id === 4)} style={{ position: 'absolute', left: '160px', width: '1288px', height: currentLang === 'en' ? '260px' : '245px', border: '6px solid #FFF', borderRadius: '25px', background: 'transparent' }}>
                                        <div style={{ fontFamily: "'Inter', sans-serif", fontSize: currentLang === 'en' ? '50px' : '70px', padding: '0 10px', textAlign: 'center', color: '#FFFFFF', whiteSpace: 'pre-line' }}>{q.options[0].text}</div>
                                    </button>
                                </div>
                                <div style={{ position: 'absolute', width: '1449px', left: 'calc(50% - 1449px/2)', top: currentLang === 'en' ? '2354px' : '2289px' }}>
                                    <img src={iconB} style={{ position: 'absolute', left: '0px', top: '10px', width: '120px', transform: 'scale(1.2)' }} />
                                    <button onClick={() => handleAnswer(q.options[1].key, q.id === 4)} style={{ position: 'absolute', left: '160px', width: '1288px', height: currentLang === 'en' ? '260px' : '242px', border: '6px solid #FFF', borderRadius: '25px', background: 'transparent' }}>
                                        <div style={{ fontFamily: "'Inter', sans-serif", fontSize: currentLang === 'en' ? '50px' : '70px', padding: '0 10px', textAlign: 'center', color: '#FFFFFF', whiteSpace: 'pre-line' }}>{q.options[1].text}</div>
                                    </button>
                                </div>
                            </div>
                        ))}

                        {/* ================================================================================== */}
                        {/* ğŸŒŸ æ ¸å¿ƒä¿®æ­£ï¼šResult Page ä½¿ç”¨ Flexbox æµå‹•æ’ç‰ˆï¼Œå¾¹åº•è§£æ±ºé‡ç–Šèˆ‡é»‘ç•«é¢å•é¡Œ ğŸŒŸ */}
                        {/* ================================================================================== */}
                        {currentPage === 'result' && result && (
                            <div style={{ 
                                position: 'absolute', width: '100%', height: '100%', 
                                display: 'flex', flexDirection: 'column', alignItems: 'center', 
                                paddingTop: '366px' /* ä¿ç•™é ‚éƒ¨ç©ºé–“çµ¦æ¨™é¡Œ */
                            }}>
                                {/* 1. å•å€™èª & æ¨™é¡Œ (å›ºå®šä½ç½®) */}
                                <div style={{ fontFamily: "'Inter', sans-serif", fontSize: currentLang === 'en' ? '48px' : '56px', textAlign: 'center', color: '#FFFFFF', marginBottom: '20px' }}>{texts.result.greeting.replace('[å§“å]', playerName).replace('[NAME]', playerName)}</div>
                                <div style={{ fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '88px' : '105px', textAlign: 'center', color: '#D4AF37', marginBottom: '20px' }}>{texts.result.title}</div>
                                <div style={{ width: '779px', height: '0', border: '6px solid #D4AF37', marginBottom: '40px' }}></div>
                                <div style={{ fontFamily: "'Inter', sans-serif", fontSize: currentLang === 'en' ? '80px' : '96px', textAlign: 'center', color: '#FFFFFF', marginBottom: '40px' }}>{result.mbtiType} - {result.resultData.category}</div>
                                
                                {/* 2. æè¿°æ–‡å­— (è‡ªå‹•é«˜åº¦) */}
                                <div style={{ 
                                    width: currentLang === 'en' ? '1488px' : '1188px', 
                                    fontFamily: "'Inter', sans-serif", fontSize: currentLang === 'en' ? '46px' : '55px', 
                                    textAlign: 'center', color: '#FFFFFF', whiteSpace: 'pre-wrap', wordWrap: 'break-word',
                                    marginBottom: '60px' /* èˆ‡ä¸‹æ–¹é»ƒè‰²æ¨™é¡Œçš„é–“è· */
                                }}>
                                    {result.resultData.desc}
                                </div>
                                
                                {/* 3. é»ƒè‰²æ¨è–¦æ¨™é¡Œ */}
                                <div style={{ 
                                    width: '1412px', height: '115px', background: '#D4AF37', borderRadius: '25px 25px 0 0', 
                                    display: 'flex', alignItems: 'center', justifyContent: 'center', 
                                    fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '54px' : '64px', color: '#FFFFFF',
                                    flexShrink: 0
                                }}>
                                    {texts.result.recommendation}
                                </div>
                                
                                {/* 4. ç”¢å“å®¹å™¨ (åŒ…ä½ Tag å’Œ å¡ç‰‡) */}
                                <div style={{ 
                                    width: '1412px', boxSizing: 'border-box', border: '6px solid #D4AF37', borderRadius: '0 0 25px 25px',
                                    display: 'flex', flexDirection: 'column', alignItems: 'center', padding: '50px 70px'
                                }}>
                                    {/* é¦™èª¿ Tags */}
                                    <div style={{ display: 'flex', justifyContent: 'center', gap: '42px', flexWrap: 'wrap', marginBottom: '60px' }}>
                                        {result.resultData.fragrance.split(' / ').map((tag, i) => (
                                            <div key={i} style={{ padding: '19px 52px', height: '148px', background: '#D4AF37', borderRadius: '25px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '56px' : '70px', color: '#FFFFFF', boxSizing: 'border-box' }}>{tag.trim()}</div>
                                        ))}
                                    </div>

                                    {/* ç”¢å“å¡ç‰‡ Row */}
                                    <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'stretch', gap: '154px', width: '100%' }}>
                                        {result.resultData.products.map((p, i) => (
                                            <div key={i} style={{ width: '482px', background: '#D4AF37', borderRadius: '25px', padding: '15px', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
                                                <div style={{ width: '458px', height: '458px', borderRadius: '25px', overflow: 'hidden', display:'flex', alignItems:'center', justifyContent:'center', background:'#FFF', marginBottom: '20px', flexShrink: 0 }}>
                                                    <img src={p.image} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />
                                                </div>
                                                <div style={{ fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '40px' : '45px', color: '#FFFFFF', marginTop: '10px', textAlign: 'center' }}>{p.brand}</div>
                                                <div style={{ fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '48px' : '55px', color: '#FFFFFF', margin: '10px 0', textAlign: 'center' }}>{p.name}</div>
                                                <div style={{ fontFamily: "'Inter', sans-serif", fontSize: currentLang === 'en' ? '36px' : '40px', lineHeight: '1.2', color: '#FFFFFF', padding: '20px 0', textAlign: 'center', whiteSpace: 'pre-wrap', wordWrap: 'break-word', flex: 1 }}>{p.description}</div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* 5. åº•éƒ¨æŒ‰éˆ• (è‡ªå‹•æµå‹•ï¼Œèˆ‡ä¸Šæ–¹ä¿æŒé–“è·) */}
                                {!isShareMode && (
                                    <div style={{ display: 'flex', justifyContent: 'center', gap: '50px', marginTop: '50px', marginBottom: '100px' }}>
                                        <button onClick={restartQuiz} style={{ width: currentLang === 'en' ? '640px' : '540px', height: '123px', background: '#D4AF37', borderRadius: '25px', border: 'none', fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '60px' : '70px', color: '#FFFFFF' }}>{texts.restart}</button>
                                        <button onClick={goToSharePage} style={{ width: currentLang === 'en' ? '640px' : '540px', height: '123px', background: '#FFFFFF', borderRadius: '25px', border: 'none', fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '60px' : '70px', color: '#D4AF37' }}>{texts.share}</button>
                                    </div>
                                )}
                            </div>
                        )}

                        {currentPage === 'share' && (
                            <>
                                <div style={{ position: 'absolute', width: '1482px', left: 'calc(50% - 1482px/2)', top: '650px', fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '110px' : '130px', textAlign: 'center', color: '#B8860B' }}>{texts.shareQR.title}</div>
                                <div style={{ position: 'absolute', width: '1280px', left: 'calc(50% - 1280px/2)', top: '880px', fontFamily: "'Inter', sans-serif", fontSize: currentLang === 'en' ? '48px' : '56px', textAlign: 'center', color: '#FFFFFF' }}>{texts.shareQR.subtitle}</div>
                                <div style={{ position: 'absolute', width: '600px', height: '600px', left: 'calc(50% - 600px/2)', top: '1100px', background: '#FFFFFF', borderRadius: '30px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
                                    <QRCodeComp value={shareUrl} size={500} />
                                </div>
                                <div style={{ position: 'absolute', width: '1280px', left: 'calc(50% - 1280px/2)', top: '1800px', fontFamily: "'Inter', sans-serif", fontSize: currentLang === 'en' ? '42px' : '44px', textAlign: 'center', color: '#FFFFFF', whiteSpace: 'pre-line' }}>{texts.shareQR.instruction}</div>
                                <button onClick={backToResultPage} style={{ position: 'absolute', width: currentLang === 'en' ? '800px' : '600px', height: '150px', left: currentLang === 'en' ? 'calc(50% - 800px/2)' : 'calc(50% - 600px/2)', bottom: '220px', background: '#B8860B', borderRadius: '25px', border: 'none', fontFamily: "'Inter', sans-serif", fontWeight: 700, fontSize: currentLang === 'en' ? '56px' : '72px', color: '#FFFFFF' }}>{texts.shareQR.backButton}</button>
                            </>
                        )}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
